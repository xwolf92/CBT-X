<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="utf-8" />
      <title>CBT-X</title>
      <link rel="shortcut icon" href="../../../../favicon.ico" />
      <link rel="stylesheet" href="../../../../styles/style.css">
      <script src="../../../../scripts/imageMapResizer.min.js"></script>
   </head>
   <body>

      <img src="../../../../images/CESDAlogo.png" class="topright" style="height:100px">
      <img id="cockpit" class="cockpit" src="../../../../images/cockpitoff.jpg" usemap="#touchcockpit">
      <map name="touchcockpit">
      
         <area id="cockpit1" onclick="changeImage(event)" target="" alt="Parking Brake" title="Parking Brake" coords="990,883,1022,922" shape="rect" cursor="pointer">
         <area class="clickable" id="cockpit2" target="" alt="Throttle" title="Throttle" coords="727,994,832,1038" shape="rect" cursor="pointer">
         <area class="clickable" id="cockpit3" target="" alt="GEN/BAT Master Switch" title="GEN/BAT Master Switch" coords="715,683,678,629" shape="rect" onclick="changeImage2(); highlight11()" cursor="pointer">
         <area class="clickable" id="cockpit4" target="" alt="Mixure" title="Mixure"  coords="876,1058,832,988" shape="rect" onclick="; highlight8()" cursor="pointer">
         <area class="clickable" id="cockpit5" target="" alt="Fuel Shut-off Valve" title="Fuel Shut-off Valve"  coords="1041,741,1102,817" shape="rect"  cursor="pointer">
         <area class="clickable" id="cockpit6" target="" alt="Avionics Master" title="Avionics Master"  coords="761,680,739,637" shape="rect"  cursor="pointer">
         <area class="clickable" id="cockpit7" target="" alt="GEN Warning Light" title="GEN Warning Light"  coords="539,141,553,192" shape="rect" cursor="pointer">
         <area class="clickable" id="cockpit8" onclick="changeImage(event)" target="" alt="Canopy Unlock Warning Light" title="Canopy Unlock Warning Light"  coords="571,191,555,142" shape="rect" cursor="pointer">
         <area class="clickable" id="cockpit9" target="" alt="Position Light" title="Position Light" coords="233,639,280,687" shape="rect" onclick="changeImage3(); highlight13()" cursor="pointer">
     
      </map>

      <div class="tablediv">
         <table id="table" align="right">
            <tr>
               <th colspan="2" id="itemtitle"><span>BEFORE STARTING ENGINE</span></th>
            </tr>
            <tr id="item1" onclick="changeImage(event); highlight(event)">
               <td><span>1. Preflight Inspection</span></td>
               <td align="right"><span>PERFORMED</span></td>
            </tr>
            <tr id="item2" onclick="highlight(event)">
               <td><span>2. Pedals</span></td>
               <td align="right"><span>ADJUST, LOCK</span></td>
            </tr>
            <tr id="item3" onclick="highlight(event)">
               <td><span>3. Rudder</span></td>
               <td align="right"><span>FREE</span></td>
            </tr>
            <tr id="item4" onclick="highlight(event)">
               <td><span>4. Safety Belts</span></td>
               <td align="right"><span>FASTEN</span></td>
            </tr>
            <tr id="item5" onclick="highlight(event)">
               <td><span>5. Parking Brake</span></td>
               <td align="right"><span>ON</span></td>
            </tr>
            <tr id="item6" onclick="highlight(event)">
               <td><span>6. Fuel Shut-off Valve</span></td>
               <td align="right"><span>OPEN (Pushed)</span></td>
            </tr>
            <tr id="item7" onclick="highlight(event)">
               <td><span>7. Thottle</span></td>
               <td align="right"><span>IDLE</span></td>
            </tr>
            <tr id="item8" onclick="changeImage(event); highlight(event)">
               <td><span>8. Mixture</span></td>
               <td align="right"><span>FULL RICH</span></td>
            </tr>
            <tr id="item9" onclick="highlight(event)">
               <td><span>9. Firction Device of Throttle Quadrant</span></td>
               <td align="right"><span>ADJUST</span></td>
            </tr>
            <tr id="item10" onclick="highlight(event)">
               <td><span>10. Avionics Master Switch</span></td>
               <td align="right"><span>OFF</span></td>
            </tr>
            <tr id="item11" onclick="changeImage(event); highlight(event)">
               <td><span>11. BAT/GEN Master Switch</span></td>
               <td align="right"><span>ON</span></td>
            </tr>
            <tr id="item12" onclick="highlight(event)">
               <td><span>12. Generator Warning Light</span></td>
               <td align="right"><span>ILLUMINATED</span></td>
            </tr>
            <tr id="item13" onclick="highlight(event)">
               <td><span>13. Exterior Lights</span></td>
               <td align="right"><span>POSITION ON</span></td>
            </tr>
            <tr id="item14" onclick="highlight(event)">
               <td><span>14. Instrument Panel Lighting</span></td>
               <td align="right"><span>A/R</span></td>
            </tr>
            <tr id="item15" onclick="changeImage(event); highlight(event)">
               <td><span>15. Canopy</span></td>
               <td align="right"><span>CLOSE AND SECURE</span></td>
            </tr>
            <tr id="item16" onclick="highlight(event)">
               <td><span>16. Canopy Unlock Warning Light</span></td>
               <td align="right"><span>OFF</span></td>
            </tr>
         </table>
      </div>
      <a href="../normal.html" class="btnback">BACK</a>
      <a href="../../../../menu.html" class="btnmenu">MENU</a>
      <div class="navdiv">
         <a class="btnnav startbtn" id="startbtn" onclick="start()">START</a>
         <a class="btnnav nextbtngrey" id="nextbtn">NEXT</a>
      </div>

      <script>
         
         const itemTitle = document.getElementById("itemtitle");
         const startBtn = document.getElementById("startbtn");
         const nextBtn = document.getElementById("nextbtn");
         const imgsRoute = '../../../../images/';
         let tableTrIdArr = [];
         let counter = 0;
         let allowCount = true;

         function start() {
            itemTitle.classList.add("titlehighlight");
            startBtn.classList.remove('startbtn');
            startBtn.classList.add('startbtngrey');
            nextBtn.classList.remove('nextbtngrey');
            nextBtn.classList.add('nextbtn');
            startBtn.disabled;
            const tableRows = document.getElementsByTagName("tr");
            for (let i = 0; i < tableRows.length; i++) {
               if(tableRows[i].id !== "") {
                  tableTrIdArr.push(tableRows[i].id)
               }
            }
            startBtn.setAttribute('onclick','restart()');
         };

         function restart(){
            console.log('Restarting...')
         };

         nextBtn.addEventListener('click', () => {
            allowCount && 
               counter++;
               startBtn.innerText = "RESTART";
               if(counter < 4) {
                  const element = document.getElementById(`item${counter}`);
                  element.classList.add("highlight");
               } else if(counter = 4){
                  const element = document.getElementById(`item${counter}`);
                  element.classList.add("highlight");
                  allowCount = false;
                  nextBtn.innerText = "TOUCH";
                  nextBtn.classList.remove('nextbtn');
                  nextBtn.classList.add('nextbtngrey');
                  // Add clickable to the element at the touch maptag
                  const firstClickableElement = document.getElementById("cockpit1");
                  firstClickableElement.classList.add("clickable");
                  // TODO: Continue from here...
               }
         });

         // Aplica clase 'Highlight' sobre elementos 1 a 16 de manera dinámica solo después de activar START Button

         // function highlight(event) {
         //    const elementId = event.path[1].id;
         //    const element = document.getElementById(elementId);
         //    if(!itemTitle.classList.value) {
         //       return
         //    } else {
         //       element.classList.add('highlight');
         //    }
         // };

         // Substituye imagen al clickar en el elemento de la lista correspondiente

         function changeImage(event) {
            const cockpit = document.getElementById("cockpit");
            let cockpitImgRoute = cockpit.attributes.src.nodeValue;
            const elementId = event.path[1].id;
            const element = document.getElementById(elementId);
            if (cockpitImgRoute === imgsRoute + 'cockpitoff.jpg' && elementId === 'item1'){
                  cockpit.attributes.src.nodeValue = imgsRoute + 'cockpitmixture.jpg';
            } else if(cockpitImgRoute === imgsRoute + 'cockpitmixture.jpg' && elementId === 'item8'){
                  cockpit.attributes.src.nodeValue = imgsRoute + 'cockpitmaster.jpg';
            } else if(cockpitImgRoute === imgsRoute + 'cockpitmaster.jpg' && elementId === 'item11'){
                  cockpit.attributes.src.nodeValue = imgsRoute + 'cockpitposition.jpg';
            } else if(cockpitImgRoute === imgsRoute + 'cockpitposition.jpg' && elementId === 'item15'){
                  cockpit.attributes.src.nodeValue = imgsRoute + 'cockpitcanopyclosed.jpg';
            }
         };

         imageMapResize();
      </script>

   </body>
</html>