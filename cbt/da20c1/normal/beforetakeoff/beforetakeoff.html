<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="utf-8" />
      <title>CBT-X</title>
      <link rel="shortcut icon" href="../../../../favicon.ico" />
      <link rel="stylesheet" href="../../../../styles/style.css">
      <script src="../../../../scripts/imageMapResizer.min.js"></script>
   </head>
   <body>

      <img src="../../../../images/CESDAlogo.png" class="topright" style="height:100px">
      <img id="cockpit" class="cockpit" src="../../../../images/cockpitoff.jpg" usemap="#touchcockpit">
      <map name="touchcockpit">
      
         <area id="cockpit1" target="" alt="Parking Brake" title="Parking Brake" coords="991,892,1019,931" shape="rect" cursor="pointer">
         <area id="cockpit2" target="" alt="Fuel Shut-off Valve" title="Fuel Shut-off Valve"  coords="1042,740,1102,815" shape="rect"  cursor="pointer">
         <area id="cockpit3" target="" alt="Throttle" title="Throttle" coords="725,972,832,1015" shape="rect" cursor="pointer">
         <area id="cockpit4" target="" alt="Mixture" title="Mixture"  coords="834,912,881,987" shape="rect" cursor="pointer">
         <area id="cockpit5" target="" alt="Avionics Master" title="Avionics Master"  coords="739,637,759,683" shape="rect"  cursor="pointer">
         <area id="cockpit6" target="" alt="GEN/BAT Master Switch" title="GEN/BAT Master Switch" coords="676,627,715,685" shape="rect"  cursor="pointer">
         <area id="cockpit7" target="" alt="GEN Warning Light" title="GEN Warning Light"  coords="537,141,557,192" shape="rect" cursor="pointer">
         <area id="cockpit8" target="" alt="Position Light" title="Position Light" coords="236,641,279,690" shape="rect"  cursor="pointer">
         <area id="cockpit9" target="" alt="Canopy Unlock Warning Light" title="Canopy Unlock Warning Light"  coords="552,139,571,195" shape="rect" cursor="pointer">
     
         <!-- 539,141,553,192 -->

      </map>

      <div class="tablediv">
         <table id="table" align="right">
            <tr>
               <th colspan="2" id="itemtitle"><span>BEFORE TAKE-OFF</span></th>
            </tr>
            <tr id="item1">
               <td><span>1. Parking Brake</span></td>
               <td align="right"><span>ON</span></td>
            </tr>
            <tr id="item2">
               <td><span>2. Taxi Light</span></td>
               <td align="right"><span>OFF</span></td>
            </tr>
            <tr id="item3">
               <td><span>3. Safety Belts</span></td>
               <td align="right"><span>Fastened</span></td>
            </tr>
            <tr id="item4">
               <td><span>4. Canopy</span></td>
               <td align="right"><span>Closed & locked</span></td>
            </tr>
            <tr id="item5">
               <td><span>5. Canopy Unlock Warning Light</span></td>
               <td align="right"><span>OFF</span></td>
            </tr>
            <tr id="item6">
               <td><span>6. Fuel Pressure</span></td>
               <td align="right"><span>Check</span></td>
            </tr>
            <tr id="item7">
               <td><span>7. Fuelshut-off valve</span></td>
               <td align="right"><span>Check OPEN</span></td>
            </tr>
            <tr id="item8">
               <td><span>8. Fuel Quantity Indicator</span></td>
               <td align="right"><span>Check</span></td>
            </tr>
            <tr id="item9">
               <td><span>9. Fuel Pump</span></td>
               <td align="right"><span>Check ON</span></td>
            </tr>
            <tr id="item10">
               <td><span>10. Engine & Electrical gauges</span></td>
               <td align="right"><span>Check</span></td>
            </tr>
            <tr id="item11">
               <td><span>11. Mixture</span></td>
               <td align="right"><span>Full Rich</span></td>
            </tr>
            <tr id="item12">
               <td><span>12. Brakes</span></td>
               <td align="right"><span>Apply</span></td>
            </tr>
            <tr id="item13">
               <td><span>13. Throttle</span></td>
               <td align="right"><span>1700 RPM</span></td>
            </tr>
            <tr id="item14">
               <td><span>14. Oil Pressure</span></td>
               <td align="right"><span>30-60 psi</span></td>
            </tr>
            <tr id="item15">
               <td><span>15. Magnetos</span></td>
               <td align="right"><span>Check</span></td>
            </tr>
            <tr id="item16">
               <td><span>16. Mixture</span></td>
               <td align="right"><span>Check</span></td>
            </tr>
            <tr id="item17">
               <td><span>17. N/A</span></td>
               <td align="right"><span>N/A</span></td>
            </tr>
            <tr id="item18">
               <td><span>18. Alternate Air</span></td>
               <td align="right"><span>Check</span></td>
            </tr>
            <tr id="item19">
               <td><span>19. Throttle</span></td>
               <td align="right"><span>Idle</span></td>
            </tr>
            <tr id="item20">
               <td><span>20. Mixture</span></td>
               <td align="right"><span>Lean (RPM increase)</span></td>
            </tr>
            <tr id="item21">
               <td><span>21. Mixture</span></td>
               <td align="right"><span>Full Rich</span></td>
            </tr>
            <tr id="item22">
               <td><span>22. GEN/ALTN Load</span></td>
               <td align="right"><span>Check</span></td>
            </tr>
            <tr id="item23">
               <td><span>23. Throttle</span></td>
               <td align="right"><span>1000 RPM</span></td>
            </tr>
            <tr id="item24">
               <td><span>24. Circuit Breakers</span></td>
               <td align="right"><span>Check pressed IN</span></td>
            </tr>
            <tr id="item25">
               <td><span>25. Wing Flaps</span></td>
               <td align="right"><span>T/O</span></td>
            </tr>
            <tr id="item26">
               <td><span>26. Scan Flow</span></td>
               <td align="right"><span>Perform</span></td>
            </tr>
            <tr id="item27">
               <td><span>27. Flight Cotrols</span></td>
               <td align="right"><span>Check</span></td>
            </tr>
            <tr id="item28">
               <td><span>28. Pitot Heat</span></td>
               <td align="right"><span>A/R</span></td>
            </tr>
            <tr id="item29">
               <td><span>29. Windows</span></td>
               <td align="right"><span>Closed</span></td>
            </tr>
      
         </table>
      </div>
      <a href="../normal.html" class="btnback">BACK</a>
      <a href="../../../../menu.html" class="btnmenu">MENU</a>
      <div class="navdiv">
         <a class="btnnav startbtn" id="startbtn" onclick="start()">START</a>
         <a class="btnnav nextbtngrey" id="nextbtn">NEXT</a>
      </div>

      <script>
         
         const itemTitle = document.getElementById("itemtitle");
         const startBtn = document.getElementById("startbtn");
         const nextBtn = document.getElementById("nextbtn");
         const imgsRoute = '../../../../images/';
         let tableTrIdArr = [];
         let counter = 0;
         let allowCount = false;

         if(sessionStorage.getItem('reloading') === "true") {
            sessionStorage.clear();
            start();
            startBtn.innerText = "RESTART";
         }

         function start() {
            if(!allowCount) {
               itemTitle.classList.add("titlehighlight");
               startBtn.classList.remove('startbtn');
               startBtn.classList.add('startbtngrey');
               nextBtn.classList.remove('nextbtngrey');
               nextBtn.classList.add('nextbtn');
               const tableRows = document.getElementsByTagName("tr");
               for (let i = 0; i < tableRows.length; i++) {
                  if(tableRows[i].id !== "") {
                     tableTrIdArr.push(tableRows[i].id)
                  }
               }
               startBtn.setAttribute('onclick','restart()');
               allowCount = true;
            }
         };

         function restart(){
            console.log('Restarting...')
            sessionStorage.setItem('reloading','true');
            window.location.reload();
         };

         nextBtn.addEventListener('click', () => {
            if(allowCount) { 
               counter++;
               const element = document.getElementById(`item${counter}`);
               if(counter === 1) {
                  startBtn.innerText = "RESTART";
                  element.classList.add("highlight");
               } else if(counter < 4) {
                  element.classList.add("highlight");
               } else if(counter === 4){
                  element.classList.add("highlight");
                  allowCount = false;
                  nextBtn.innerText = "TOUCH";
                  nextBtn.classList.remove('nextbtn');
                  nextBtn.classList.add('nextbtngrey');
                  const firstClickableElement = document.getElementById("cockpit1");
                  firstClickableElement.classList.add("clickable");
                  firstClickableElement.setAttribute('onclick','changeImage(event)');
               } else if(counter === 9){
                  element.classList.add("highlight");
                  allowCount = false;
                  const fifthClickableElement = document.getElementById("cockpit5");
                  fifthClickableElement.classList.add("clickable");
                  fifthClickableElement.setAttribute('onclick','continueCount(event)');
                  nextBtn.innerText = "TOUCH";
                  nextBtn.classList.remove('nextbtn');
                  nextBtn.classList.add('nextbtngrey');
               } else if(counter === 14) {
                  element.classList.add("highlight");
               } else if(counter === 15) {
                  element.classList.add("highlight");
                  changeImage(event)
               }
            }
         });

         function continueCount(event) {
            if(!allowCount){
               counter++;
               const elementId = event.composedPath()[0].attributes.id.nodeValue;
               const element = document.getElementById(elementId);
               element.classList.remove("clickable");
               element.removeAttribute('onclick');
               document.getElementById(`item${counter}`).classList.add("highlight");
               if(counter === 6) {
                  const thirdClickableElement = document.getElementById("cockpit3");
                  thirdClickableElement.classList.add("clickable");
                  thirdClickableElement.setAttribute('onclick','changeImage(event)');
               } else if(counter === 10) {
                  document.getElementById(`item${counter}`).classList.add("highlight");
                  const sixthClickableElement = document.getElementById("cockpit6");
                  sixthClickableElement.classList.add("clickable");
                  sixthClickableElement.setAttribute('onclick','changeImage(event)');
                  allowCount = false;
               } else if(counter === 12) {
                  document.getElementById(`item${counter}`).classList.add("highlight");
                  const eigthClickableElement = document.getElementById("cockpit8");
                  eigthClickableElement.classList.add("clickable");
                  eigthClickableElement.setAttribute('onclick','changeImage(event)');
                  allowCount = false;
               } else if(counter === 16) {
                  allowCount = false;
               }
            }
         };

         function changeImage(event) {
            allowCount = true;
            counter++;
            const cockpit = document.getElementById("cockpit");
            let cockpitImgRoute = cockpit.attributes.src.nodeValue;
            const elementId = event.composedPath()[0].attributes.id.nodeValue;
            const element = document.getElementById(elementId);
            if (cockpitImgRoute === imgsRoute + 'cockpitoff.jpg' && elementId === 'cockpit1'){
                  cockpit.attributes.src.nodeValue = imgsRoute + 'cockpitparking.jpg';
                  element.classList.remove("clickable");
                  element.removeAttribute('onclick');
                  document.getElementById(`item${counter}`).classList.add("highlight");
                  const secondClickableElement = document.getElementById("cockpit2");
                  secondClickableElement.classList.add("clickable");
                  secondClickableElement.setAttribute('onclick','continueCount(event)');
                  allowCount = false;
            } else if(cockpitImgRoute === imgsRoute + 'cockpitparking.jpg' && elementId === 'cockpit3'){
                  cockpit.attributes.src.nodeValue = imgsRoute + 'cockpitthrottle.jpg';
                  element.classList.remove("clickable");
                  element.removeAttribute('onclick');
                  document.getElementById(`item${counter}`).classList.add("highlight");
                  const fourthClickableElement = document.getElementById("cockpit4");
                  fourthClickableElement.classList.add("clickable");
                  fourthClickableElement.setAttribute('onclick','changeImage(event)');
                  allowCount = false;
            } else if(cockpitImgRoute === imgsRoute + 'cockpitthrottle.jpg' && elementId === 'cockpit4'){
                  cockpit.attributes.src.nodeValue = imgsRoute + 'cockpitmixture.jpg';
                  element.classList.remove("clickable");
                  element.removeAttribute('onclick');
                  document.getElementById(`item${counter}`).classList.add("highlight");
                  nextBtn.innerText = "NEXT";
                  nextBtn.classList.remove('nextbtngrey');
                  nextBtn.classList.add('nextbtn');
            } else if(cockpitImgRoute === imgsRoute + 'cockpitmixture.jpg' && elementId === 'cockpit6'){
                  cockpit.attributes.src.nodeValue = imgsRoute + 'cockpitmaster.jpg';
                  element.classList.remove("clickable");
                  element.removeAttribute('onclick');
                  document.getElementById(`item${counter}`).classList.add("highlight");
                  const seventhClickableElement = document.getElementById("cockpit7");
                  seventhClickableElement.classList.add("clickable");
                  seventhClickableElement.setAttribute('onclick','continueCount(event)');
                  allowCount = false;
            } else if(cockpitImgRoute === imgsRoute + 'cockpitmaster.jpg' && elementId === 'cockpit8') {
                  cockpit.attributes.src.nodeValue = imgsRoute + 'cockpitposition.jpg';
                  element.classList.remove("clickable");
                  element.removeAttribute('onclick');
                  document.getElementById(`item${counter}`).classList.add("highlight");
                  nextBtn.innerText = "NEXT";
                  nextBtn.classList.remove('nextbtngrey');
                  nextBtn.classList.add('nextbtn');
            } else if(cockpitImgRoute === imgsRoute + 'cockpitposition.jpg') {
                  cockpit.attributes.src.nodeValue = imgsRoute + 'cockpitcanopy.jpg';
                  nextBtn.innerText = "TOUCH";
                  nextBtn.classList.remove('nextbtn');
                  nextBtn.classList.add('nextbtngrey');
                  const ninthClickableElement = document.getElementById("cockpit9");
                  ninthClickableElement.classList.add("clickable");
                  ninthClickableElement.setAttribute('onclick','continueCount(event)');
                  counter--;
                  allowCount = false;
            }
         };

         imageMapResize();
         
      </script>

   </body>
</html>